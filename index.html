<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <!-- CSS -->
    <!-- link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" type="text/css" rel="stylesheet" /> -->
    <link href="https://cdn.jsdelivr.net/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" type="text/css" />    
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet" type="text/css" />
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,700' rel='stylesheet' type='text/css' />
    <link href="style.css" rel="stylesheet" type="text/css" />
    <!-- JS libs -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js" type="text/javascript"></script>
    <!-- IF USING NG ONLY -->
    <script src="https://cdn.jsdelivr.net/angularjs/1.3.15/angular.min.js"></script>
    <script src="src/js/tirefinder.js" type="text/javascript"></script>
</head>
<body ng-app="NexenTireFinder"> 
    <div class="wrapper" ng-controller="DataCtrl">
        <div class="row">        
<!--			<div class="logo col-lg-6 col-xs-6">
                <img src="img/logo.png" />
			</div>-->
            <div class="menu clearfix col-lg-6 col-xs-12">
                <div id="menuGroupDrop3" class="dropdown-toggle btn-group col-lg-12" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <ul class="dd-menu col-lg-9 col-xs-12" aria-labelledby="menuGroupDrop3">
                        <li class="col-xs-12">  
                            <form name="SBV" class="col-lg-12 form" role="form" ng-click="active = 'SBV'">
                                <h4>Search By Vehicle</h4> 
                                changed: {{changed}} | sbvvalid: {{ sbvValid }} | sbsvalid: {{ sbsValid }} | done: {{ done }} | active: {{ active }}
                                <div class="form-inline">
                                    <div class="form-group">
                                        <label><select class="form-control" ng-model="yearSelect" ng-options="yearSelect for yearSelect in year.value" ng-change="selectedYear = yearSelect; update(); makeSelect = 0; modelSelect = 0; styleSelect = 0" ng-click="sbvValid=false; done=false;"><option value=''>{{ year.label }}</option></select></label>
                                        
                                    </div>
                                    <div class="form-group">
                                        <label><select class="form-control" ng-model="makeSelect" ng-options="makeSelect for makeSelect in make.value" ng-change="selectedMake = makeSelect; update(); modelSelect = 0" ng-click="sbvValid=false"><option value="">{{ make.label }}</option></select></label>
                                    </div>
                                </div>
                                <div class="form-inline">
                                    <div class="form-group">
                                        <label><select class="form-control" ng-model="modelSelect" ng-options="modelSelect for modelSelect in model.value" ng-change="selectedModel = modelSelect; update(); styleSelect = 0" ng-click="sbvValid=false"><option value="">{{ model.label }}</option></select></label>
                                    </div>
                                </div>
                                <div class="form-inline">
                                    <div class="form-group">
                                        <label><select class="form-control" ng-model="styleSelect" ng-options="styleSelect for styleSelect in style.value" ng-change="selectedStyle = styleSelect; update()"><option value="">{{ style.label }}</option></select></label>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn search" ng-click="sbvValid ? displayResults() : ''; changed = false" id="searchByVehicleBtn">
                                            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                                        </button>
                                        <input type="hidden" ng-value="{{ sbvValid = style.value.indexOf(styleSelect) >= 0 && model.value.indexOf(modelSelect) >= 0 }}" />
                                    </div>
<!--                                    {{ sbvValid = style.value.indexOf(styleSelect) >= 0 && model.value.indexOf(modelSelect) >= 0 }}
                                    {{ sbsValid = rimsize.value.indexOf(rimSelect) >= 0 }}
                                    {{ year.value.indexOf(yearSelect) }} 
                                    {{ make.value.indexOf(makeSelect) }} 
                                    {{ model.value.indexOf(modelSelect) }} 
                                    {{ style.value.indexOf(styleSelect) }} -->
                                </div>    
                            </form>
                        </li>
                        <div class="col-xs-12"><hr></div>
                        <li class="col-xs-12">
                            <form name="SBS" class="col-lg-12 form" role="form" ng-click="active = 'SBS'" style="padding-bottom: 15px;">
                                <h4>Search By Size</h4>
                                <div class="form-inline">
                                    <div class="form-group">
                                        <label><select class="form-control" ng-model="widthSelect" ng-options="widthSelect for widthSelect in tirewidth.value" ng-change="selectedWidth = widthSelect; update(); ratioSelect = 0; rimSelect = 0" ng-click="sbsValid=false; done=false"><option value=''>{{ tirewidth.label }}</option></select></label>
                                    </div>
                                    <div class="form-group">
                                        <label><select class="form-control" ng-model="ratioSelect" ng-options="ratioSelect for ratioSelect in tireratio.value" ng-change="selectedRatio = ratioSelect; update(); rimSelect = 0"><option value="">{{ tireratio.label }}</option></select></label>
                                    </div>
                                    <div class="form-group">
                                        <label><select class="form-control" ng-model="rimSelect" ng-options="rimSelect for rimSelect in rimsize.value" ng-change="selectedRim = rimSelect; update()"><option value="">{{ rimsize.label }}</option></select></label>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn search" ng-click="sbsValid ? displayResults() : ''; changed = false" id="searchByTireBtn">
                                            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                                        </button>
                                        <input type="hidden" ng-value="{{ sbsValid = rimsize.value.indexOf(rimSelect) >= 0 }}" />
                                    </div>
                                </div>
                            </form>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div id="results" class="col-lg-6" ng-if="done">
                
                <div ng-if="sizes.length == 1 && sbvValid && active == 'SBV'">
                    <div class="col-lg-12">
                        <h2 class="col-lg-6">Tire patterns available for: </h2> 
                        <h3 class="col-lg-6">{{ selectedYear }} {{ selectedMake }} {{ selectedModel }} {{ selectedStyle }}</h3>
                    </div>
                    <div class="col-lg-12">
                        <h4 class="col-lg-3">Front Tires: </h4> 
                        <h2 class="col-lg-8"> {{ selectedFront }} </h2>
                    </div>
                    <div class="col-lg-12">
                        <h4 class="col-lg-3">Rear Tires: </h4>
                        <h2 class="col-lg-8"> {{ selectedBack }} </h2>
                    </div>
                </div>

                <div ng-if="sizes.length > 1 && sbvValid && active == 'SBV'">
                    <h2 class="col-lg-12">Choose the right fit</h2>
                    <h4 class="col-lg-12 desc">{{ sizes.length }} tire sizes are available for: {{ selectedYear }} {{ selectedMake }} {{ selectedModel }} {{ selectedStyle }}</h4>
                    <div class="col-xs-12">
                        <span class="col-sm-4 col-xs-12">Option {{ sizes.indexOf(sizes[0])+1 }}: {{ sizes[0] }} </span>
                        <button ng-click="matchTireSize(sizes.splice(1, 1))" class="btn">Choose</button>
                    </div>
                    <div class="col-xs-12">
                        <span class="col-sm-4 col-xs-12">Option {{ sizes.indexOf(sizes[1])+1 }}: {{ sizes[1] }} </span>
                        <button ng-click="selectedSize = sizes.splice(1, 2); matchTireSize()" class="btn">Choose</button>
                    </div>
                </div>                   
                
                <div ng-if="sbsValid && active == 'SBS'">
                    <h4 class="col-lg-12">Your results for: </h4>
                    <h5>Tire Width: {{ selectedWidth }} Tire Ratio: {{ selectedRatio }} Rim Size: {{ selectedRim }} </h5>
                </div>
                
                <div class="col-lg-12">
                    <ul ng-if="sizes.length == 1">
                        <li class="col-lg-3 col-xs-6" ng-repeat="prop in results" style="height: 120px;">
                            <h6 style="position:absolute;"> {{ prop.Name }} | {{ prop.ShortDescription }} </h6>
                            <img ng-src="http://www.nexentireusa.com/cms_uploads/{{ prop.TeaserImage }}" />
                        </li>
                    </ul>
                </div>
                <div class="col-lg-12">
                    <h3 class="col-lg-12" ng-if="noMatches">Sorry, the tire size you have searched for is not available.</h3>
                </div>
            </div>              
            
		</div>          
    </div>   
    
    <script>
        $(function() {});
    </script>
</body>
</html>